<script> 
import {filehandle,dirty, sutra} from './store.js'
import Player from './player.svelte'
import {savefile,openfile,newfile} from './workfile.js'
function handleKeydown(evt) {
    const key=evt.key.toLowerCase();
    const alt=evt.altKey;
    if (key=='f5') {//prevent refresh accidently
       // evt.preventDefault();
        return;
    } else if (key=='o' && alt) {
        openfile();
    } else if (key=='s' && alt) {
        savefile();
    } else if (key=='s' && alt) {
        newfile();
    }
}
</script>
<svelte:window on:keydown={handleKeydown}/>
<button disabled={$dirty&&$filehandle} title="alt-o é–‹æª”" class="clickable" on:click={openfile}>ðŸ“‚</button>
<button disabled={!$dirty||!$filehandle} title="alt-s å­˜æª”" on:click={savefile}>ðŸ’¾</button>

åœ–<input bind:value={$sutra.folio} size=5/>
éŸ³<input bind:value={$sutra.audio} size=5/>
<input bind:value={$sutra.foliolines} size=1/>
<button disabled={$dirty} title="alt-n æ–°æª”" on:click={newfile}>ðŸ“„</button>

<Player/>